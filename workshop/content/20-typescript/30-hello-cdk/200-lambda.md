+++
title = "Hello Lambda"
weight = 200
+++

## Lambda handler code

ã¾ãšã¯ã€Lambda handlerã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰æ›¸ã„ã¦ã„ãã¾ã™ã€‚

1. `cdk-workshop`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`lambda`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚
<!-- TODO: Cloud9ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`.`ã§å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’éè¡¨ç¤ºã«ã—ã¦ã‚‹ã€‚ä½•ã‹ã—ã‚‰å¯¾å¿œãŒå¿…è¦ã€‚tsã§handleræ›¸ãæ‰‹é †ã«ã—ã¡ã‚ƒã ã‚ã‹ãªãã€‚ã€‚ -->
2. TS CDK ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ `cdk init` ã§ä½œæˆã™ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã™ã¹ã¦ã® `.js` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç„¡è¦–ã—ã¾ã™ã€‚
   ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’gitã§è¿½è·¡ã™ã‚‹ã«ã¯ã€ `.gitignore` ãƒ•ã‚¡ã‚¤ãƒ«ã« `!lambda/*.js` ã‚’è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚
   ã“ã‚Œã«ã‚ˆã‚Šã€ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Lambdaã‚¢ã‚»ãƒƒãƒˆã‚’ç™ºè¦‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
3. `lambda/hello.js`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã€ä»¥ä¸‹ã®å†…å®¹ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```js
exports.handler = async function(event) {
  console.log("request:", JSON.stringify(event, undefined, 2));
  return {
    statusCode: 200,
    headers: { "Content-Type": "text/plain" },
    body: `Hello, CDK! You've hit ${event.path}\n`
  };
};
```

ã“ã‚Œã¯ã€**ã€ŒHello, CDK! Youâ€™ve hit [url path]ã€**ã¨ã„ã†ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™å˜ç´”ãªLambdaé–¢æ•°ã§ã™ã€‚
HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¨HTTPãƒ˜ãƒƒãƒ€ãƒ¼ãŒä»˜åŠ ã•ã‚ŒãŸHTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¿œç­”ã™ã‚‹ãŸã‚ã«ã€API Gatewayã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

{{% notice info %}}
ã“ã®Lambdaé–¢æ•°ã¯JavaScriptã§å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚
ãã®ä»–ã®è¨€èªã§ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯[AWS Lambdaã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.aws.amazon.com/lambda/latest/dg/welcome.html)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
{{% /notice %}}

## ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã¯ä½¿ã‚ãšã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†

ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆã‚’ã™ã‚‹ã®ã§ã¯ãªãã€å®Ÿéš›ã«CDKã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ï¼ˆé€šå¸¸ã€å…¥åŠ›ã™ã‚‹é‡ã¯å¤šãã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€CDKã®ä½¿ã„æ–¹ã«ã¤ã„ã¦ã‚ˆã‚Šç†è§£ã—ã¦ã„ãŸã ã‘ã¾ã™ã€‚
IDEãŒã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãŠã‚ˆã³ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ã«å¯¾å¿œã—ã¦ã„ã‚‹ã®ãŒã”ç†è§£ã„ãŸã ã‘ã‚‹ã§ã—ã‚‡ã†ã€‚

![](./auto-complete.png)

## AWS Lambdaé–¢æ•°ã‚’ã‚¹ã‚¿ãƒƒã‚¯ã«è¿½åŠ ã™ã‚‹

Add an `import` statement at the beginning of `lib/cdk-workshop-stack.ts`, and a
`lambda.Function` to your stack.

`import`ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’`lib/cdk-workshop-stack.ts`ã®å†’é ­ã«æŒ¿å…¥ã—ã€`lambda.Function`ã‚’ã‚¹ã‚¿ãƒƒã‚¯ã«è¿½åŠ ã—ã¾ã™ã€‚

{{<highlight ts "hl_lines=3 9-14">}}
import { Stack, StackProps } from 'aws-cdk-lib';
import { Construct } from 'constructs';
import * as lambda from 'aws-cdk-lib/aws-lambda'

export class CdkWorkshopStack extends Stack {
  constructor(scope: Construct, id: string, props?: StackProps) {
    super(scope, id, props);

    // defines an AWS Lambda resource
    const hello = new lambda.Function(this, 'HelloHandler', {
      runtime: lambda.Runtime.NODEJS_16_X,   // execution environment
      code: lambda.Code.fromAsset('lambda'), // code loaded from "lambda" directory
      handler: 'hello.handler',              // file is "hello", function is "handler"
    })
  }
}
{{</highlight>}}

æ³¨ç›®ã™ã¹ãã„ãã¤ã‹ã®ç‚¹ï¼š

- ã“ã®é–¢æ•°ã¯`NODEJS_16_X`(Nodejs v16.x)ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
- ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã¯ã€å…ˆç¨‹ä½œã£ãŸ `lambda` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚
  ãƒ‘ã‚¹ã¯ã€`cdk` ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ç›¸å¯¾ãƒ‘ã‚¹ã§ã™ã€‚
- ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ã®åå‰ã¯ `hello.handler` ï¼ˆã€Œhelloã€ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã€ã€Œhandlerã€ã¯é–¢æ•°åã§ã™ï¼‰

## ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆ(constructs) ã¨ ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼(constructors) ã«ã¤ã„ã¦

ã”è¦§ã®ã¨ãŠã‚Šã€`CdkWorkshopStack`ã¨`lambda.Function`ã®ä¸¡æ–¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹ï¼ˆãŠã‚ˆã³CDKã®ä»–ã®å¤šãã®ã‚¯ãƒ©ã‚¹ï¼‰ã¯`(scope, id, props)`ã¨ã„ã†åŒã˜ã‚ˆã†ãªå¼•æ•°ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ã€ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ãŒã™ã¹ã¦**ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿**ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚
ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã¯CDKã‚¢ãƒ—ãƒªã®åŸºæœ¬çš„ãªæ§‹æˆè¦ç´ ã§ã™ã€‚
ãã‚Œã‚‰ã¯ã€Œã‚¯ãƒ©ã‚¦ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã‚’è¡¨ç¾ã—ã¾ã™ã€‚ã‚¯ãƒ©ã‚¦ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä»‹ã—ã¦ã‚ˆã‚Šé«˜ã„ãƒ¬ãƒ™ãƒ«ã®æŠ½è±¡åŒ–ã«æ§‹ç¯‰ã§ãã¾ã™ã€‚
ã‚¹ã‚³ãƒ¼ãƒ—ã«ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã€ãã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã«ã¯ä»–ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆãªã©ã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã¯å¸¸ã«åˆ¥ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ä½œæˆã•ã‚Œã€ä½œæˆã•ã‚ŒãŸã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ä¸€æ„ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„è­˜åˆ¥å­ï¼ˆidï¼‰ã‚’æŒã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã—ãŸãŒã£ã¦ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆåˆæœŸåŒ–å­ï¼ˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ï¼‰ã«ã¯å¸¸ã«æ¬¡ã®ã‚·ã‚°ãƒãƒãƒ£ãŒå¿…è¦ã§ã™ã€‚

1. **`scopeï¼š`** : æœ€åˆã®å¼•æ•°ã«ã¯ã€ã“ã®æ§‹æˆãŒä½œæˆã•ã‚Œã‚‹ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å¿…ãšæŒ‡å®šã—ã¾ã™ã€‚
   ã»ã¨ã‚“ã©ã™ã¹ã¦ã®å ´åˆã€ç¾åœ¨ã® ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‚’å®šç¾©ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
   ã¤ã¾ã‚Šã€é€šå¸¸æœ€åˆã®å¼•æ•°ã«ã¯`this`ã‚’æ¸¡ã™ã ã‘ã§ã™ã€‚

2. **`id`** ï¼š 2ç•ªç›®ã®å¼•æ•°ã¯ã€æ§‹é€ ã®**ãƒ­ãƒ¼ã‚«ãƒ«ID**ã§ã™ã€‚
   ã“ã‚Œã¯ã€åŒã˜ã‚¹ã‚³ãƒ¼ãƒ—å†…ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆé–“ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹IDã§ã™ã€‚
   CDKã¯ã“ã®IDã‚’ä½¿ç”¨ã—ã¦ã€ ã“ã®ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§å®šç¾©ã•ã‚ŒãŸå„ãƒªã‚½ãƒ¼ã‚¹ã®[CloudFormation è«–ç†ID](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resources-section-structure.html)ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
   *CDKã®IDã®è©³ç´°*ã«ã¤ã„ã¦ã¯ã€[CDKãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«](https://docs.aws.amazon.com/cdk/latest/guide/identifiers.html#identifiers_logical_ids)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

3. **`props`** : æœ€å¾Œã®ï¼ˆå ´åˆã«ã‚ˆã£ã¦ã¯ä¸è¦ã§ã‚ã‚‹å ´åˆã‚‚ã‚ã‚‹ï¼‰å¼•æ•°ã¯ã€åˆæœŸåŒ–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚»ãƒƒãƒˆã§ã™ã€‚
   ã“ã‚Œã‚‰ã¯å„ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã§å›ºæœ‰ã§ã™ã€‚
   ãŸã¨ãˆã°ã€`lambda.Function`ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã¯`runtime`ã€`code`ã€`handler`ã®ã‚ˆã†ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚
   IDEã®ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã¾ãŸã¯[ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.aws.amazon.com/cdk/api/latest/docs/aws-lambda-readme.html)ã‚’ä½¿ç”¨ã—ã¦ã€ã•ã¾ã–ã¾ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’èª¿ã¹ã‚‰ã‚Œã¾ã™ã€‚

## Diff

ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å‰ã«å·®åˆ†ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```
cdk diff
```

å‡ºåŠ›ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```text
Stack CdkWorkshopStack
IAM Statement Changes
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚ Resource                        â”‚ Effect â”‚ Action         â”‚ Principal                    â”‚ Condition â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + â”‚ ${HelloHandler/ServiceRole.Arn} â”‚ Allow  â”‚ sts:AssumeRole â”‚ Service:lambda.amazonaws.com â”‚           â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
IAM Policy Changes
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚ Resource                    â”‚ Managed Policy ARN                                                             â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + â”‚ ${HelloHandler/ServiceRole} â”‚ arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(NOTE: There may be security-related changes not in this list. See https://github.com/aws/aws-cdk/issues/1299)

Resources
[+] AWS::IAM::Role HelloHandler/ServiceRole HelloHandlerServiceRole11EF7C63 
[+] AWS::Lambda::Function HelloHandler HelloHandler2E4FBA4D 


NOTICES

21902   apigateway: Unable to serialize value as aws-cdk-lib.aws_apigateway.IModel

        Overview: Users of CDK in any language other than TS/JS cannot use
                  values that return an instance of a deprecated class.

        Affected versions: framework: >=2.41.0, framework: >=1.172.0

        More information at: https://github.com/aws/aws-cdk/issues/21902


If you donâ€™t want to see a notice anymore, use "cdk acknowledge <id>". For example, "cdk acknowledge 21902".
```

As you can see, this code synthesizes an __AWS::Lambda::Function__ resource. It
also synthesized a couple of [CloudFormation
parameters](https://docs.aws.amazon.com/cdk/latest/guide/get_cfn_param.html)
that are used by the toolkit to propagate the location of the handler code.

ä¸Šè¨˜ã®ã¨ãŠã‚Šã€ã“ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ **AWS::Lambda::Function** ãƒªã‚½ãƒ¼ã‚¹ç”¨ã®CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¾ã—ãŸã€‚
ã¾ãŸã€ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆãŒãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã®å ´æ‰€ã‚’ä¼é”ã™ã‚‹ãŸã‚ã«ã„ãã¤ã‹ã®[CloudFormationãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼](https://docs.aws.amazon.com/cdk/latest/guide/get_cfn_param.html)ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

## Deploy

æ¬¡ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã—ã¾ã™ã€‚

```
cdk deploy
```

`cdk deploy` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€CloudFormationã‚¹ã‚¿ãƒƒã‚¯ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã ã‘ã§ãªãã€
åˆæœŸæ§‹ç¯‰ã—ãŸS3ãƒã‚±ãƒƒãƒˆã«å¯¾ã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã® `lambda` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åœ§ç¸®å¾Œã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã‚‹ã“ã¨ãŒãŒåˆ†ã‹ã‚‹ã§ã—ã‚‡ã†ã€‚

## Testing our function

AWS Lambdaã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ç§»å‹•ã—ã¦ã€Lambdaé–¢æ•°ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã—ã‚‡ã†ã€‚

1. [AWS Lambdaã‚³ãƒ³ã‚½ãƒ¼ãƒ«](https://console.aws.amazon.com/lambda/home#/functions) ã‚’é–‹ãã¾ã™
   ï¼ˆæ­£ã—ã„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼‰ã€‚

   Lambdaé–¢æ•°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

   ![](./lambda-1.png)

2. é–¢æ•°åã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç§»å‹•ã—ã¾ã™ã€‚

3. **ãƒ†ã‚¹ãƒˆ**ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

    ![](./lambda-2.png)

5. **ã‚¤ãƒ™ãƒ³ãƒˆå**ã«`test`ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

4. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**ãƒªã‚¹ãƒˆã‹ã‚‰**Amazon API Gateway AWS Proxy**ã‚’é¸æŠã—ã¾ã™ã€‚

    ![](./lambda-3.png)

6. **ä¿å­˜**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

7. **ãƒ†ã‚¹ãƒˆ**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€å®Ÿè¡ŒãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚

8. **å®Ÿè¡Œçµæœ**ãƒšã‚¤ãƒ³ã§**è©³ç´°**ã‚’å±•é–‹ã™ã‚‹ã¨ã€å‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

   ![](./lambda-4.png)

# ğŸ‘
